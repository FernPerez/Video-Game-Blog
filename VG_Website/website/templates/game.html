{% extends "base.html" %}
{% block title %}{{ game.title }}{% endblock %}
{% block content %}
<div class="mainGameContainer gameShrinkAnim">
    <div class="mainGameDetails">
        <div class="TitleDiv titleSlideAnim">
            <h1>{{ game.title }}</h1>
            <h5>Platforms: {{ game.platforms }}</h5>
            <h5 id="release">Release date: {{ game.releaseDate }}</h5>
            <h6>Genre(s): {{ game.genre1.replace('_', ' ') }}
            <!-- Replace underscores in genres with spaces -->
            {% if game.genre2 != "" %}
            / {{ game.genre2.replace('_', ' ')  }}
            {% endif %}
            {% if game.genre3 != ""%}
            / {{ game.genre3.replace('_', ' ')  }}
            {% endif %}</h6>
        </div>
        <div class="scoreDiv scoreSlideAnim">
            <br/><br/><br/><br/>
            <h1>Score: {{ game.score }}</h1>
        </div>
    </div>
    <div class="divLine"></div>
    <div class="gameContainer">
        <div class="gameInfoContainer gameCoverAnim">
            <div class="gameHeader">
                <h4>{{ game.title }}</h4>
            </div>
            <div class="gameCoverContainer">
                <!-- Display game cover if it exists. Otherwise use placeholder -->
                {% if game.gameCover %}
                    <img src="/static/images/Public_Imgs/{{ game.gameCover }}" class="dashboard">
                {% else %}
                    <img src="/static/images/placeholder.png" class="dashboard">
                {% endif %}
            </div>
            <div class="detailDiv">
                <h5>Details</h5>
            </div>
            <div class="detailSubDiv">
                <h6 class="detailKey">Series:</h6>
                <h6 class="detailValue">{{ game.series }}</h6>
            </div>
            <div class="detailSubDiv">
                <h6 class="detailKey">Franchise:</h6>
                {% if game.franchise == '' %}
                    <h6 class="detailValue">None</h6>
                {% else %}
                    <h6 class="detailValue">{{ game.franchise }}</h6>
                {% endif %}
            </div>
            <div class="detailSubDiv">
                <h6 class="detailKey">Date Started:</h6>
                <h6 class="detailValue">{{ game.dateStarted }}</h6>
            </div>
            <div class="detailSubDiv">
                <h6 class="detailKey">Date Finished:</h6>
                <h6 class="detailValue">{{ game.dateFinished }}</h6>
            </div>
        </div>
        <div class="gameDescContainer">
            <h4 class="titleSlideAnim">Description:</h4>
            <p class="descAnim">{{ game.description }}</p>
        </div>
    </div>
    <form method="POST">
        <button class="btn btn-primary updateBtn">Update</button>
    </form>
</div>
<script src="/static/js/game.js"></script>
<script>
    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    window.onload = async function(){
        convertDates('{{ game.releaseDate }}');
        await new Promise(r => setTimeout(r, 500));
    }
</script>
{% endblock %}