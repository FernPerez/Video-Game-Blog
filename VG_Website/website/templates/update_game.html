{% extends "base.html" %}
{% block title %}Update Game{% endblock %}
{% block content %}

<style>
    body.background {
        background-image: url(../../static/images/Main_Background.gif);  
    }
</style>
<div class="subContainerDiv">
<h1>Update {{ game.title }}</h1>
<form method="POST" enctype="multipart/form-data">
    <div class="form-group">
        <br/>
        <label for="title">Title *</label>
        <input 
            type="text" 
            class="form-control" 
            id="title" 
            name="title" 
            value="{{ game.title }}"
        />
        <label for="platforms">Platforms *</label>
        <input 
            type="text" 
            class="form-control" 
            id="platforms" 
            name="platforms" 
            value="{{ game.platforms }}"
        />
        <br/>
        <label for="series">Series (if applicable)</label>
        <input
            type="text"
            class="form-control"
            id="series"
            name="series"
            value="{{ game.series }}"
        />
        <label for="franchise">Franchise (if applicable)</label>
        <input
            type="text"
            class="form-control"
            id="franchise"
            name="franchise"
            value="{{ game.franchise }}"
        />
        <br/>
        <label for="genre1">Genre 1 *</label>
        <select class="form-control" name="genre1" id="genre1">
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Collectathon">Collectathon</option>
            <option value="Fighting">Fighting</option>
            <option value="Indie">Indie</option>
            <option value="Metroidvania">Metroidvania</option>
            <option value="Open_World">Open World</option>
            <option value="2D_Platformer">2D Platformer</option>
            <option value="3D_Platformer">3D Platformer</option>
            <option value="Puzzle">Puzzle</option>
            <option value="RPG">RPG</option>
            <option value="JRPG">JRPG</option>
            <option value="Sim">Simulation</option>
            <option value="Shooter">Shooter</option>
            <option value="Strategy">Strategy</option>
            <option value="Turn-based">Turn-based</option>
            <option value="Visual_Novel">Visual Novel</option>
        </select>
        <label for="genre2">Genre 2</label>
        <select class="form-control" name="genre2" id="genre2">
            <option value="N/A">N/A</option>
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Collectathon">Collectathon</option>
            <option value="Fighting">Fighting</option>
            <option value="Indie">Indie</option>
            <option value="Metroidvania">Metroidvania</option>
            <option value="Open_World">Open World</option>
            <option value="2D_Platformer">2D Platformer</option>
            <option value="3D_Platformer">3D Platformer</option>
            <option value="Puzzle">Puzzle</option>
            <option value="RPG">RPG</option>
            <option value="JRPG">JRPG</option>
            <option value="Sim">Simulation</option>
            <option value="Shooter">Shooter</option>
            <option value="Strategy">Strategy</option>
            <option value="Turn-based">Turn-based</option>
            <option value="Visual_Novel">Visual Novel</option>
        </select>
        <label for="genre3">Genre 3</label>
        <select class="form-control" name="genre3" id="genre3">
            <option value="N/A">N/A</option>
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Collectathon">Collectathon</option>
            <option value="Fighting">Fighting</option>
            <option value="Indie">Indie</option>
            <option value="Metroidvania">Metroidvania</option>
            <option value="Open_World">Open World</option>
            <option value="2D_Platformer">2D Platformer</option>
            <option value="3D_Platformer">3D Platformer</option>
            <option value="Puzzle">Puzzle</option>
            <option value="RPG">RPG</option>
            <option value="JRPG">JRPG</option>
            <option value="Sim">Simulation</option>
            <option value="Shooter">Shooter</option>
            <option value="Strategy">Strategy</option>
            <option value="Turn-based">Turn-based</option>
            <option value="Visual_Novel">Visual Novel</option>
        </select>
        <br/>
        <label for="releaseDate">Release Date *</label>
        <input 
            type="date" 
            class="form-control" 
            id="releaseDate" 
            name="releaseDate" 
            value="{{ game.releaseDate }}"
        />
        <label for="dateStarted">Date Started *</label>
        <input 
            type="date" 
            class="form-control" 
            id="dateStarted" 
            name="dateStarted" 
            value="{{ game.dateStarted }}"
        />
        <label for="dateFinished">Date Finished</label>
        <input 
            type="date" 
            class="form-control" 
            id="dateFinished" 
            name="dateFinished" 
            value="{{ game.dateFinished }}"
        />
        <br/>
        <label for="description">Description</label>
        <textarea 
            type="text" 
            class="form-control" 
            id="description" 
            name="description" 
            placeholder="Enter brief description."

        >{{ game.description }}</textarea>
        <label for="score">Score *</label>
        <input 
            type="number" 
            class="form-control" 
            id="score" 
            name="score"
            min="0"
            max="10"
            step="0.01" 
            placeholder="0"
            value="{{ game.score }}"
        />
        <br/>
        <label for="gameCover">Game Cover</label>
        <input 
            type="file" 
            class="form-control" 
            id="gameCover" 
            name="gameCover" 
            value="{{ game.gameCover }}"
        />
        <label for="gameMusic">Music</label>
        <input 
            type="file" 
            class="form-control" 
            id="gameMusic" 
            name="gameMusic" 
            value="{{ game.gameMusic }}"
        />
        <br/>
    <button type="submit" class="btn btn-primary">Submit</button>
    <br/><br/>
    </div>
</form>
</div>

<script type="text/javascript">
    window.onload = function() {

        var genres = '{{ genres|tojson|safe }}';
        var genres = genres.replaceAll('"', '');
        var genres = genres.replaceAll('[', '');
        var genres = genres.replaceAll(']', '');
        var genres = genres.replaceAll(' ', '');
        var genres = genres.split(',');

        console.log(genres);

        document.getElementById("genre1").value = genres[0];
        if(genres[1] == '') {
            document .getElementById("genre2").value = 'N/A';
        }
        else {
            document.getElementById("genre2").value = genres[1];
        }
        if(genres[2] == '') {
            document .getElementById("genre3").value = 'N/A';
        }
        else {
            document.getElementById("genre3").value = genres[2];
        }
    };
</script>
{% endblock %}